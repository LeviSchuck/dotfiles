#!/bin/bash

MUSIC_HOME=${1:-"$HOME/Dropbox/Music/"}

LIST_FILE="$HOME/.mpd/dirs"
if [ ! -f "$LIST_FILE" ]; then
    find "$MUSIC_HOME" -type f | cut -c $(echo $MUSIC_HOME | wc -c)- > "$LIST_FILE"
fi

CHOSEN=`cat $LIST_FILE | dmenu -i`

if [ "$CHOSEN" != "" ]; then
    mpc clear
    mpc add "$CHOSEN"
    mpc play
fi
